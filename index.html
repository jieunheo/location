<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta property="og:title" content="Wedding Day - 8.31">
  <meta property="og:type" content="website">
  <meta property="og:image" content="./img/thumb.jpg">
  <meta property="og:description" content="조하진&허지은 결혼을 축하해주세요.">
  <title>Wedding Day</title>
  <link rel="icon" href="./img/favicon.png">
  
  <link rel="stylesheet" href="./css/style.css">
  <script src="./js/jquery.min.js"></script>

  <link rel="stylesheet" href="./css/heart_animation.css">
  <link rel="stylesheet" href="./css/blossom.css">
  <link rel="stylesheet" href="./css/calender.css">

  <script defer src="./js/blossom.js"></script>
  <script>
    $(window).load(function () {
      const randomNum = Math.random() * 2;
      type = Math.round(randomNum);

      // 배경 타입 설정
      go_type(type);

      // 디데이 처음 실행
      dayCount();

      // 흩날리는 애니메이션 적용
      $('body').sakura();
    });

    // 배경음악 설정
    var bgm = document.getElementById('bgm');
    $('#btn_bgm_control').on('click', function(e) {
      e.preventDefault();
      if ( bgm.paused ) {
        $(this).find('img').attr('src', $(this).find('img').attr('src').replace(/off\.gif$/, 'on.gif'));
        bgm.play();
      } else {
        $(this).find('img').attr('src', $(this).find('img').attr('src').replace(/on\.gif$/, 'off.gif'));
        bgm.pause();
      }
    });

    // 디데이 설정
    var countdownInterval = setInterval(dayCount, 1000);
    function dayCount() {
      const today = new Date();
      const dday = new Date("2024-08-31");
      let timeGap = dday.getTime() - today.getTime();
      
      // 남은 일
      const remainTime = Math.ceil(timeGap / (1000 * 60 * 60 * 24));
      $('#main_dday_text').text(remainTime);

      // 적용
      if(timeGap > 0) {
        $('#day_count').text(remainTime);

      } else {
        $('#day_count').text('Day');

        // 남은 시간
        const starttime = new Date("2024-08-31 13:00:00");
        timeGap = starttime.getTime() - today.getTime();
        if(timeGap <= 0) {
          $('#end').css('display','block');
          $('.time').css('display','none');
          clearInterval(countdownInterval);
          return;
        }
        const hours = String(Math.floor((timeGap % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2,'0');
        const minutes = String(Math.floor((timeGap % (1000 * 60 * 60)) / (1000 * 60))).padStart(2,'0');
        const seconds = String(Math.floor((timeGap % (1000 * 60)) / 1000)).padStart(2,'0');
        
        $('#seconds').text(seconds);
        $('#minutes').text(minutes);
        $('#hours').text(hours);

        if($('.time').css('display') == 'none') {
          $('.time').css('display','block');
        }
      }
    }

    function go_type(type) {
      let old_class = document.getElementById("type").classList.item(0);
      if(old_class == "type"+type) return;

      $('body').removeClass('type0 type1 type2');
      $('body').addClass('type'+type);

      // 현재 배경 버튼 텍스트 수정
      let type_name = 'Sky';
      switch (type) {
        case '1':
        case 1: type_name = 'Blossoms'; break;
        case '2':
        case 2: type_name = 'Leaf'; break;
      }
      $('.types_name').removeClass('active');
      $('.types_name button').each(function (index, item) {
          if(index == 0) $(item).text('S');
          if(index == 1) $(item).text('B');
          if(index == 2) $(item).text('L');
      });	
      $('#name'+type).addClass('active');
      $('#name'+type+" button").text(type_name);

      // 하트 애니메이션 다시 실행
      $("#checkbox").prop("checked", false);
      setTimeout(() => {
        $("#checkbox").prop("checked", true);
      }, 100);
    }
  </script>
  
  <link preload href="//fonts.googleapis.com/css2?family=Dancing+Script:wght@400..700&family=Gowun+Dodum&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="./css/pretendard.css">
</head>
<body id="type">

  <main>
    <div class="types_wrap">
      <div class="flex">
        <div class="music">
          <a class="music_btn" href="#" id="btn_bgm_control"><img src="./img/sound_on.gif"></a>
          <audio id="bgm" loop="loop" autoplay="autoplay">
            <source src="./music/스윗소로우-좋겠다(feat. 오지은, 정준일).mp3" type="audio/mp3">
          </audio>
        </div>
        <div class="line">|</div>
        <div id="name0" class="types_name" data-type="S"><button onclick="go_type(0)">S</button></div>
        <div id="name1" class="types_name" data-type="B"><button onclick="go_type(1)">B</button></div>
        <div id="name2" class="types_name" data-type="L"><button onclick="go_type(2)">L</button></div>
      </div>
    </div>

    <div class="photo-wrap">
      <h1>Wedding Day</h1>
      <h2>2024.08.31</h2>
      <div class="img">
        <p class="day">D-<span id="day_count">Day</span></p>
        <p class="time">
          <span id="hours">00</span> :
          <span id="minutes">00</span> :
          <span id="seconds">00</span>
        </p>
        <p id="end">
          축하해주셔서 감사합니다.
        </p>
      </div>
      <h3>
        조하진
        <label for="checkbox">
          <input type="checkbox" id="checkbox" hidden checked>
          <svg t="1689815540548" class="icon" viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="2271"><path d="M742.4 101.12A249.6 249.6 0 0 0 512 256a249.6 249.6 0 0 0-230.72-154.88C143.68 101.12 32 238.4 32 376.32c0 301.44 416 546.56 480 546.56s480-245.12 480-546.56c0-137.92-111.68-275.2-249.6-275.2z" fill="#231F20" p-id="2272" id="heart"></path></svg>
          <span></span>
        </label>
        허지은
      </h3>
    </div>

    <div class="btn-wrap">
      <div>
        <a href="javascript: alert('Coming Soon...')">모바일 청첩장</a>
      </div>
      <div>
        <a href="https://m.map.kakao.com/actions/detailMapView?id=476733690&refService=place" target="_blank">예식장 위치</a>
      </div>
    </div>

    <div class="info">
      <div class="info_date">8월 31일</div>
      <div class="info_time">토요일 오후 1:00</div>
      <div class="info_place">전주 아름다운컨벤션 2층 피에스타홀</div>
    </div>

    <div class="calender">
      <div class="main_dday_area fib">
        <div class="main_dday_time_wrapper">
          <div class="main_dday_date">
            8월
          </div>
        </div>
        <div class="main_dday_calendar">
          <table>
          <tbody>
            <tr><th>일</th><th>월</th><th>화</th><th>수</th><th>목</th><th>금</th><th>토</th></tr>
            <tr><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>&nbsp;</td><td>1</td><td>2</td><td>3</td></tr>
            <tr><td>4</td><td>5</td><td>6</td><td>7</td><td>8</td><td>9</td><td>10</td></tr>
            <tr><td>11</td><td>12</td><td>13</td><td>14</td><td>15</td><td>16</td><td>17</td></tr>
            <tr><td>18</td><td>19</td><td>20</td><td>21</td><td>22</td><td>23</td><td>24</td></tr>
            <tr><td>25</td><td>26</td><td>27</td><td>28</td><td>29</td><td>30</td><td><span class="dday">31</span></td></tr>
          </tbody>
          </table>
        </div>
        <div class="main_dday_wrapper">
          * 예식일이 <span id="main_dday_text">9</span> 일 남았습니다.
        </div>
      </div>
    </div>
  </main>
  <footer>
    <p>Copyright (c) <b>HeoJieun</b> All Rights Reserved.</p>
  </footer>
</body>
</html>